<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Калькулятор распределения тепла в стяжке с отражающей плёнкой</title>
  <style>
    body {
      background: #f8f9fa;
      font-family: Arial, sans-serif;
      max-width: 430px;
      margin: 0 auto;
      padding: 15px;
    }
    h1 {
      font-size: 1.18rem;
      color: #4361ee;
      margin-bottom: 18px;
    }
    .calc-block {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      padding: 16px;
      margin-bottom: 16px;
    }
    label {
      display: block;
      margin: 10px 0 4px;
    }
    input[type="number"], input[type="range"] {
      width: 100%;
      border-radius: 7px;
      border: 1px solid #ccc;
      margin-bottom: 8px;
      font-size: 1rem;
      box-sizing: border-box;
      padding: 6px;
    }
    .slider-value {
      font-weight: bold;
      font-size: 1.05rem;
      margin-left: 5px;
      color: #3f37c9;
    }
    .result {
      margin-top: 14px;
      padding: 12px;
      background: #e8f0fe;
      border-radius: 7px;
    }
    .distrib {
      margin-top: 10px;
      font-size: 1.01rem;
      color: #2c3e50;
      padding: 6px 0 0 0;
      border-top: 1px dashed #b7b7b7;
    }
    .up { color: #228c22; }
    .down { color: #e06725; }
    .note { font-size:0.97em; color:#666; margin-top:6px; }
  </style>
</head>
<body>
  <h1>Калькулятор распределения тепла в стяжке<br>с отражающей плёнкой</h1>
  <div class="calc-block">
    <label for="heat">Мощность, выделяемая в стяжке (Вт):</label>
    <input type="number" id="heat" value="70" min="1">

    <label for="reflectivity">Коэффициент отражения плёнки (%):</label>
    <input type="number" id="reflectivity" value="95" min="50" max="99">

    <label for="distance">Расстояние <b>от стяжки до плёнки</b> (мм): 
      <span class="slider-value" id="distance-val">0</span>
    </label>
    <input type="range" id="distance" min="0" max="100" step="1" value="0">

    <label for="upshare">Доля тепла вверх без отражения (%):</label>
    <input type="number" id="upshare" value="70" min="1" max="99">

    <div class="result" id="result"></div>
    <div class="note">
      <b>Справка:</b> Обычно вверх идёт 60–80% тепла (зависит от утепления и конструкции).
    </div>
  </div>
  <script>
    function calc() {
      const heat = parseFloat(document.getElementById('heat').value);
      const reflectivity = parseFloat(document.getElementById('reflectivity').value) / 100;
      const d = parseFloat(document.getElementById('distance').value); // мм
      const upShare = parseFloat(document.getElementById('upshare').value) / 100;

      // 1. Базовое распределение без отражения
      const Q_up_base = heat * upShare;
      const Q_down_base = heat * (1 - upShare);

      // 2. Эффективное отражение — экспоненциально возрастает с зазором
      const alpha = 0.06;
      const R_eff = reflectivity * (1 - Math.exp(-alpha * d));

      // 3. Возвращённое отражённое тепло
      const Q_return = Q_down_base * R_eff;

      // 4. Итоговое распределение
      const Q_up = Q_up_base + Q_return;
      const Q_down = Q_down_base - Q_return;

      let msg = `
        <b>Мощность стяжки:</b> ${heat.toFixed(1)} Вт<br>
        <b>Зазор между стяжкой и плёнкой:</b> ${d} мм<br>
        <b>Эффективное отражение:</b> ${(R_eff*100).toFixed(1)}%
        <div class="distrib">
          <span class="up">Вверх в помещение: <b>${Q_up.toFixed(1)} Вт</b> (${(Q_up/heat*100).toFixed(1)}%)</span><br>
          <span class="down">Вниз (потери): <b>${Q_down.toFixed(1)} Вт</b> (${(Q_down/heat*100).toFixed(1)}%)</span>
        </div>
      `;
      if (d === 0) {
        msg += `<br><span style="color:#f66;"><b>Нет зазора — отражение практически отсутствует.</b></span>`;
      }
      if (d >= 50) {
        msg += `<br><span style="color:#07a15c;"><b>Зазор достаточный — отражение максимальное.</b></span>`;
      }
      document.getElementById('result').innerHTML = msg;
      document.getElementById('distance-val').textContent = d;
    }

    document.getElementById('distance').addEventListener('input', calc);
    document.getElementById('heat').addEventListener('input', calc);
    document.getElementById('reflectivity').addEventListener('input', calc);
    document.getElementById('upshare').addEventListener('input', calc);

    calc(); // начальный расчёт
  </script>
</body>
</html>
